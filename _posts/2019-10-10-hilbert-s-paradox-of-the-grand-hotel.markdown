---
layout: post
title: "希尔伯特旅馆问题"
categories: mypost
---

# 希尔伯特旅馆问题

著名的希尔伯特旅馆问题，又称为无限旅馆问题（Infinite Hotel Paradox）。这是一个著名的思想实验，背景是一个理想中的“具有无限多个房间的”旅馆，在所有房间已经客满的情况下，如何给新来的客人安排房间。新客人的数量可以是有限个，也可以是无限个，也可以是无限个无限个。

这里，关于房间和客人的“无限多个”，指的都是“无限可数（countably infinite）”。

## 有限多个新客人

这是比较简单的一种情况。

假设来了1位新客人，解决方案是将新客人安排到1号房间，将原来在1号房间的客人转移到2号房间，将原来在2号房间的客人转移到3号房间，以此类推。即，将原先住在第n号房间的客人转移到第n+1号房间中，以腾出1号房间。

假设来了k位新客人，解决方案是将新客人安排到1号房间到k号房间，将原来在1号房间的客人转移到第k+1号房间，将原来在2号房间的客人转移到第k+2号房间，以此类推。即，将原先住在第n号房间的客人转移到第n+k号房间中，以腾出1号房间到k号房间。

## 无限多个新客人

首先将原先住在酒店中的客人的房间进行调整：原先住在1号房间的客人转移到2号房间，原先住在2号房间的客人转移到4号房间，原先住在3号房间的客人转移到6号房间，即，将原先住在第n号房间的客人转移到第2n号房间中，以腾出所有的奇数号房间。

然后给所有的新客人进行编号，不过和普通的编号不同的是，每隔一个编一个号，即第1位新客人的编号是1，第2位新客人的编号是3，第3位新客人的编号是5，以此类推。编号之后，所有的新客人就可以按照自己的编号直接入住到旅馆的对应房间之中了。

## 无限多辆客车，每辆车上无限多个新客人

这是一个稍微有些复杂的情况，不过也有多种类型的不同解法。这里给出两个不同的方案。

### 方案一

和之前的思路一样，先调整旅馆中的已有客人的房间，再按照某种方案给新来的客人生成房间编号。

首先调整已有客人的房间：原先住在1号房间的客人转移到2号房间，原先住在2号房间的客人转移到4号房间，原先住在3号房间的客人转移到8号房间，原先住在4号房间的客人转移到16号房间，即，将原先住在第n号房间的客人转移到第$2^n$号房间中，这样把所有“非2的整数次幂”的房间都腾出来了。

然后给所有的客车编号，编号的方案是，将第i辆客车编号为第i个奇质数。也即，1号客车的客车编号是3，2号客车的客车编号是5，3号客车的客车编号是7，4号客车的客车编号是11，5号客车的客车编号是13，以此类推。然后每辆车上的每个客人都有一个连续的座位号，从1开始连续编号即可。

那么对于第i辆车上的第j位客人来说，他/她的旅馆房间编号就是第i个奇质数的j次幂。例如，4号客车的6号客人的旅馆房间编号是11的6次方。

这个方法显然不会产生冲突（即，不可能存在不同的客人分配到相同的房间号），并且按照这个方案进行房间分配之后，旅店的房间会空很多很多，有大量的房间闲置。

### 方案二

旅馆中已经有了无限多位客人，每个客人都已经有了一个连续的编号。新来的每一辆客车上的每一个客人也都分配一个座位号。然后将旅馆看成是0号客车，新来的客车从1开始，每辆客车分配一个客车编号。这样一来，所有的客人，不管是已经在旅馆里面的，还是旅馆外面的，每人都有了一个客车编号和一个座位号。然后按照下面的方式来安排房间：

将客车编号和座位编号进行“交叉”，即，先把客车编号和座位编号补充到相同的长度，例如0号客车的1729号客人，先补充成0000号客车的1729号客人。然后把这两个序列进行交叉拼接（注意不能直接连在一起），变成01070209。那么这位客人的房间号就是1070209。类似的，客车编号789，座位编号1234的客人，他/她的房间号是1728394。

注意这个方法是不会产生冲突的，并且不会浪费房间（即，不会有空闲的房间），从房间编号可以反推出这个房间属于哪一辆车的哪位客人。

## 习题

很多书上都有这样的习惯，在末尾来一个“某某某留给读者作为习题”。这里也留一个小的习题吧，在上述场景下面稍微改一下：

假设这个无限旅馆位于海边，海上来了无限多艘渡轮，每艘渡轮上有无限多辆客车，每辆车上无限多位新客人。那么又应该怎么分配房间号呢？

